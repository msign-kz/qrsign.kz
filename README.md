## Описание стандарта QRSign. Версия 1.

# Требование к QR 

Содержимое QR кода должно быть представлено ссылкой в виде `https://<url>/{id}` (пример - `https://qr.msign.biz/1234567890`). Общая длина содержимого QR не должно превышать 100 символов.

# Требование к процессу подписания

Процесс подписи сообщения проходит в три этапа:

- Получении метаданных о документе
- Получение сообщения
- Подписание сообщения - выполняется на устройстве
- Передача подписанных данных на сервер


# Описание этапов

- Получение метаданных о документе

Получение данных осуществляется вызовом ссылки методом GET.

Тело ответа представляет из себя объект в виде:
```
{
	authRequired: <true|false>,
	signatureFormat: <XMLDSIG|PKCS7>,
	timestampRequired: <true|false>,
	version: 1.0
}
```

- Получение сообщения

Получение данных осуществляется вызовом POST запроса на ссылку.

Тело POST запроса представляет из себя объект в виде:

```
{
  signedUrl: <Подпись сообщения в формате PKCS7 + Timestamp>,
}
```

Тело ответа представляет из себя объект в виде:
```
{
	data: <base64 данные>,
	type: <file|text>,
	fileName: <название файла - при type=file>,
	mimeType: <тип MIME, опционально>,
	responseCode: <SUCCESS - при наличии доступа к данным|ERROR - при наличии ошибки|FORBIDDEN - при отсутствии доступа к данным>
}
```
- Передача подписанных данных на сервер

Передача данных осуществляется вызовом POST запроса на адерс `<ссылка>/signed`.

Тело POST запроса представляет из себя объект в виде:
```
{
  signedData: <Подпиcанное сообщения в необходимом формате + Timestamp>,
}
```

Тело ответа представляет из себя объект в виде:
```
{
	signedId: <идентификатор подписанных данных>
}
```
